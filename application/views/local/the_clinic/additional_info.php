<div class = "row my-3 p-10 bg-white border rounded">
    <div class = "col-12 d-flex d-flex align-items-center justify-content-end">
        <div class = "mr-1">Show:</div>
        <div class = "d-flex align-items-center"><input type = "checkbox" id = "social_media_toggle" style = "width:20px; height:20px;"></div>
    </div>
    <div class = "col-12 mb-4 d-flex justify-content-between align-items-center my-5">
        <div><h3>Social Media</h3></div>
        <div class = 'add_social_media_btn btn btn-light-primary btn-icon' ><i class = 'fa fa-plus'></i></div>
    </div>
    <div class = "col-12">
        <div class="table-responsive">
            <table class="table" id="social_media_tb">
                <thead>
                    <th>ID</th>
                    <th>Logo</th>
                    <th>URL</th>
                    <th>Display</th>
                    <th style = "width: 100px;">Action</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class = "row my-3 p-10 bg-white border rounded">
    <div class = "row col-12">
        <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
            <div class = "mr-1">Show:</div>
            <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_1_toggle" style = "width:20px; height:20px;"></div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(En)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_1_en" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(En)</h6>
                <div id="desc_1_en"></div>
            </div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(Es)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_1_es" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(Es)</h6>
                <div id="desc_1_es"></div>
            </div>
        </div>
    </div>
    <div class = "row col-12">
        <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
            <div class = "mr-1">Show:</div>
            <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_2_toggle" style = "width:20px; height:20px;"></div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(En)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_2_en" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(En)</h6>
                <div id="desc_2_en"></div>
            </div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(Es)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_2_es" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(Es)</h6>
                <div id="desc_2_es"></div>
            </div>
        </div>
    </div>
    <div class = "row col-12">
        <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
            <div class = "mr-1">Show:</div>
            <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_3_toggle" style = "width:20px; height:20px;"></div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(En)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_3_en" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(En)</h6>
                <div id="desc_3_en"></div>
            </div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(Es)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_3_es" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(Es)</h6>
                <div id="desc_3_es"></div>
            </div>
        </div>
    </div>
    <div class = "row col-12">
        <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
            <div class = "mr-1">Show:</div>
            <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_4_toggle" style = "width:20px; height:20px;"></div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(En)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_4_en" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(En)</h6>
                <div id="desc_4_en"></div>
            </div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(Es)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_4_es" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(Es)</h6>
                <div id="desc_4_es"></div>
            </div>
        </div>
    </div>
    <div class = "row col-12">
        <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
            <div class = "mr-1">Show:</div>
            <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_5_toggle" style = "width:20px; height:20px;"></div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(En)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_5_en" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(En)</h6>
                <div id="desc_5_en"></div>
            </div>
        </div>
        <div class = "col-6">
            <div class = "form-group">
                <h6>Title(Es)</h6>
                <input class="form-control" style = "font-size:25px;" id="title_5_es" type="text" />
            </div>
            <div class = "form-group">
                <h6>Description(Es)</h6>
                <div id="desc_5_es"></div>
            </div>
        </div>
    </div>
    <div class = "col-12 text-right">
        <div class="btn btn-light-primary" id = "additional_update">Update</div>
    </div>
</div>
<?php include ('social_media_add_modal.php')?>
<?php include ('social_media_edit_modal.php')?>
<?php include ('social_media_upload_modal.php')?>

<script>
    $(document).ready(function() {

        $('#social_media_tb').DataTable({
            "autoWidth": false,
            "pagingType": "full_numbers",
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            responsive: true,
            language: {
                search: "_INPUT_",
                searchPlaceholder: "Search social media",
            },
            "ajax": {
                "url": "<?php echo base_url() ?>local/TheClinic/readSocialMedia",
                "type": "GET"
            },
            "columns": [
                { data:'id' },
                { data: 'img', render:function(data, type, row){
                        return `<img style="width:100px; height:80px;" src="` + `<?php echo base_url() ?>assets/images/social_media/` + row.img +`"></img>`
                    }
                },
                { data: 'url' },
                { data: 'status', render: function(data, type, row){
                        if(row.status == 1)
                            return `<div class="text-success">Visible</div>`;
                        else
                            return `<div class="text-danger">Invisible</div>`;
                    }
                },
                { data: 'id',
                    render: function (data, type, row) {
                        return `
                            <div data-id = "`+row.id+`">
                                <span class="btn btn-icon btn-sm btn-light-primary upload_social_media_btn"><i class="fas fa-image"></i></span>
                                <span class="btn btn-icon btn-sm btn-light-warning edit_social_media_btn"><i class="fas fa-edit"></i></span>
                                <span class="btn btn-icon btn-sm btn-light-danger  delete_social_media_btn"><i class="fas fa-trash"></i></span>
                            </div>
                            `
                    }
                }
            ]
        });
    });

    $(document).on('click', '.delete_social_media_btn', function(){
        window.id = $(this).closest('div').attr('data-id');
        var tmp = $(this).parent().parent().parent();
        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.value) {
                $.ajax ({
                    url: '<?php echo base_url() ?>local/TheClinic/deleteSocialMedia',
                    method: "POST",
                    data: {id: window.id},
                    dataType: "text",
                    success: function (data) {
                        if(data = "ok")
                            tmp.remove();
                    }
                });
            }
        });
    });

    handleAreaToggleBox('#social_media_toggle', 'clinic_socialmedia');
    handleAreaToggleBox('#desc_1_toggle', 'clinic_additional_1');
    handleAreaToggleBox('#desc_2_toggle', 'clinic_additional_2');
    handleAreaToggleBox('#desc_3_toggle', 'clinic_additional_3');
    handleAreaToggleBox('#desc_4_toggle', 'clinic_additional_4');
    handleAreaToggleBox('#desc_5_toggle', 'clinic_additional_5');

    $('#desc_1_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_1_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_1_en").summernote("code",`<?php echo $component['t_clinic_additional_1_desc']['en']?>`);
    $("#desc_1_es").summernote("code",`<?php echo $component['t_clinic_additional_1_desc']['es']?>`);

    $('#desc_2_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_2_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_2_en").summernote("code",`<?php echo $component['t_clinic_additional_2_desc']['en']?>`);
    $("#desc_2_es").summernote("code",`<?php echo $component['t_clinic_additional_2_desc']['es']?>`);

    $('#desc_3_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_3_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_3_en").summernote("code",`<?php echo $component['t_clinic_additional_3_desc']['en']?>`);
    $("#desc_3_es").summernote("code",`<?php echo $component['t_clinic_additional_3_desc']['es']?>`);

    $('#desc_4_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_4_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_4_en").summernote("code",`<?php echo $component['t_clinic_additional_4_desc']['en']?>`);
    $("#desc_4_es").summernote("code",`<?php echo $component['t_clinic_additional_4_desc']['es']?>`);

    $('#desc_5_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_5_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_5_en").summernote("code",`<?php echo $component['t_clinic_additional_5_desc']['en']?>`);
    $("#desc_5_es").summernote("code",`<?php echo $component['t_clinic_additional_5_desc']['es']?>`);

    $("#title_1_en").val(`<?php echo $component['t_clinic_additional_1_title']['en']?>`);
    $("#title_1_es").val(`<?php echo $component['t_clinic_additional_1_title']['es']?>`);

    $("#title_2_en").val(`<?php echo $component['t_clinic_additional_2_title']['en']?>`);
    $("#title_2_es").val(`<?php echo $component['t_clinic_additional_2_title']['es']?>`);


    $("#title_3_en").val(`<?php echo $component['t_clinic_additional_3_title']['en']?>`);
    $("#title_3_es").val(`<?php echo $component['t_clinic_additional_3_title']['es']?>`);


    $("#title_4_en").val(`<?php echo $component['t_clinic_additional_4_title']['en']?>`);
    $("#title_4_es").val(`<?php echo $component['t_clinic_additional_4_title']['es']?>`);


    $("#title_5_en").val(`<?php echo $component['t_clinic_additional_5_title']['en']?>`);
    $("#title_5_es").val(`<?php echo $component['t_clinic_additional_5_title']['es']?>`);
    
    $("#additional_update").click(function(){

        var data = [];
        data[0] = $("#title_1_en").val();
        data[1] = $("#title_1_es").val();

        data[2] = $("#desc_1_en").summernote("code");
        data[3] = $("#desc_1_es").summernote("code");

        data[4] = $("#title_2_en").val();
        data[5] = $("#title_2_es").val();
        data[6] = $("#desc_2_en").summernote("code");
        data[7] = $("#desc_2_es").summernote("code");

        data[8] = $("#title_3_en").val();
        data[9] = $("#title_3_es").val();
        data[10] = $("#desc_3_en").summernote("code");
        data[11] = $("#desc_3_es").summernote("code");

        data[12] = $("#title_4_en").val();
        data[13] = $("#title_4_es").val();
        data[14] = $("#desc_4_en").summernote("code");
        data[15] = $("#desc_4_es").summernote("code");

        data[16] = $("#title_5_en").val();
        data[17] = $("#title_5_es").val();
        data[18] = $("#desc_5_en").summernote("code");
        data[19] = $("#desc_5_es").summernote("code");

        $.ajax({
            url: '<?php echo base_url() ?>local/TheClinic/updateAdditional',
            method: "POST",
            data: {data: data},
            dataType: "text",
            success: function (data) {
                handleResponse(data);
            }
        });
    });
</script>